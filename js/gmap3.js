!function(p,n,e){"use strict";function b(n){return x(!0,{},n||{})}function M(){var n=Array.prototype.slice,t=n.call(arguments,1);return n.apply(arguments[0],t)}function l(n){return void 0===n}function g(n){return w().then(function(){return n})}function d(n){return L[n]||(L[n]=B(n)),L[n]}function B(n){function t(n){return e.apply(this,n)}var e=O[n];return t.prototype=e.prototype,new t(M(arguments,1))}function h(n,t){n.split(" ").forEach(t)}function C(n,t){(P(n)?n:[n]).forEach(t)}function E(n){return Object.keys(n)}function i(t){return E(t).map(function(n){return t[n]})}function v(n,t){return(n=b(n)).bounds&&(n.bounds=a(n.bounds)),g(t(n))}function m(o,r,n){var t=j();return o=b(o),w().then(function(){var n,e,t=o.address;return t?(delete o.address,(n=t,e=j(),"string"==typeof n&&(n={address:n}),d("Geocoder").geocode(n,function(n,t){t===O.GeocoderStatus.OK?e.resolve(n[0].geometry.location):e.reject()}),e).then(function(n){o[r]=n})):void(o[r]=T(o[r]))}).then(function(){t.resolve(n(o))}),t}function T(n,t){return P(n)?new O.LatLng(n[0],n[1]):!t||!n||n instanceof O.LatLng?n:new O.LatLng(n.lat,n.lng)}function a(n,t){return P(n)?new O.LatLngBounds({lat:n[2],lng:n[3]},{lat:n[0],lng:n[1]}):t&&!n.getCenter?new O.LatLngBounds({lat:n.south,lng:n.west},{lat:n.north,lng:n.east}):n}function k(o,r){function n(){function e(n){return t.getProjection().fromLatLngToDivPixel(n)}var t=this,n=[];i.call(t),t.setMap(o),t.onAdd=function(){t.getPanes().overlayMouseTarget.appendChild(u[0])},r.position?(t.getPosition=function(){return r.position},t.setPosition=function(n){r.position=n,t.draw()},t.draw=function(){var n=e(r.position);u.css({left:n.x+r.x+"px",top:n.y+r.y+"px"})}):(t.getBounds=function(){return r.bounds},t.setBounds=function(n){r.bounds=n,t.draw()},t.draw=function(){var n=e(r.bounds.getSouthWest()),t=e(r.bounds.getNorthEast());u.css({left:n.x+r.x+"px",top:t.y+r.y+"px",width:t.x-n.x+r.x+"px",height:n.y-t.y+r.y+"px"})}),t.onRemove=function(){n.map(function(n){O.event.removeListener(n)}),u.remove(),t.$=u=null},t.$=u}var i=O.OverlayView,u=p(e.createElement("div")).css({border:"none",borderWidth:0,position:"absolute"}).append(r.content);return(r=x({x:0,y:0},r)).position?r.position=T(r.position,!0):r.bounds&&(r.bounds=a(r.bounds,!0)),n.prototype=new i,new n}function D(n,t,e,o){this.cluster=n,this.markers=t,this.$=e.$,(this.overlay=e).getBounds=function(){return B("LatLngBounds",o.getSouthWest(),o.getNorthEast())}}function y(l,g){function t(){var n,t,e,o,r,i,u,a,c,s;return B("Circle",{center:l.getCenter(),radius:1.15*(n=l.getCenter(),t=l.getBounds().getNorthEast(),e=Math,o=e.PI,r=o*n.lat()/180,i=o*n.lng()/180,u=o*t.lat()/180,a=o*t.lng()/180,c=e.cos,s=e.sin,6371e3*e.acos(e.min(c(r)*c(u)*c(i)*c(a)+c(r)*s(i)*c(u)*s(a)+s(r)*s(u),1)))}).getBounds()}function n(){var r,i,u,a,c,e,n=l.getZoom(),s={},f=[],p={};e=""+n,3<n&&(i=t(),C(y,function(n,t){i.contains(n.getPosition())||(e+="-"+t,p[t]=!0,n.getMap()&&n.setMap(null))})),v&&C(y,function(n,t){p[t]||v(n)||(e+="-"+t,p[t]=!0,n.getMap()&&n.setMap(null))}),e!==d&&(d=e,C(y,function(n,e){var t,o;p[e]||(r=[e],t=n.getPosition(),o=h.fromLatLngToDivPixel(t),i=B("LatLngBounds",h.fromDivPixelToLatLng(B("Point",o.x-L,o.y+L)),h.fromDivPixelToLatLng(B("Point",o.x+L,o.y-L))),w&&C(M(y,e+1),function(n,t){!p[t+=e+1]&&i.contains(n.getPosition())&&(r.push(t),p[t]=!0)}),a=r.join("-"),s[a]=!0,x[a]||(c=r.map(function(n){return y[n]}),(u=g.cb(M(c)))?(i=B("LatLngBounds"),C(c,function(n){i.extend(n.getPosition()),n.getMap()&&n.setMap(null)}),(u=b(u)).position=i.getCenter(),x[a]=new D(m,M(c),k(l,u),i),f.push(x[a])):C(c,function(n){n.getMap()||n.setMap(l)})))}),C(E(x),function(n){s[n]||(x[n].overlay.setMap(null),delete x[n])}),f.length&&C(P,function(n){n(f)}))}function e(){clearTimeout(o),o=setTimeout(n,100)}var o,r,d,h,v,m=this,y=[],L=(g.size||200)>>1,w=!0,x={},P=[];(g=g||{}).markers=g.markers||[],m._b=function(n){n(i(x)),P.push(n)},m.markers=function(){return M(y)},m.groups=function(){return i(x)},m.enable=function(){w||(w=!0,d="",e())},m.disable=function(){w&&(w=!1,d="",e())},m.add=function(n){y.push(n),d="",e()},m.remove=function(t){y=y.filter(function(n){return n!==t}),d="",e()},m.filter=function(n){v!==n&&(v=n,d="",e())},g.markers.map(function(n){n.position=T(n.position),y.push(B("Marker",n))}),r=setInterval(function(){(h=function(n){function t(){return this.onAdd=this.onRemove=this.draw=function(){},O.OverlayView.call(this)}t.prototype=new O.OverlayView;var e=new t;return e.setMap(n),e.getProjection()}(l))&&(clearInterval(r),O.event.addListener(l,"zoom_changed",e),O.event.addListener(l,"bounds_changed",e),n())},10)}function t(n,r){var i=this;E(r[0]).forEach(function(o){i[o]=function(){var t=[],e=M(arguments);return r.forEach(function(n){t.push(n[o].apply(n,e))}),"get"===o?1<t.length?t:t[0]:i}}),i.$=n}function r(t,n){function s(){return{$:t,get:f.get}}function o(n,t,u,a){var c=3<arguments.length;c||(a=u),p.each(n,function(e,i){C(t,function(o){var r=o instanceof D,n=r||o instanceof O.OverlayView,t=n?o.$.get(0):o;O.event["add"+(n?"Dom":"")+"Listener"+(a?"Once":"")](t,e,function(e){C(i,function(n){if(S(n))if(r)n.call(s(),void 0,o,o.cluster,e);else if(c){var t=M(u);t.unshift(o),t.push(e),n.apply(s(),t)}else n.call(s(),o,e)})})})})}function r(r){return function(n){if(P(n)){var t=[],e=n.map(function(n){return r.call(f,n).then(function(n){t.push(n)})});return(o=e,w.apply(p,o)).then(function(){return a.push(t),t})}var o;return r.apply(f,arguments).then(function(n){return a.push(n),n})}}function i(e){return function(){var t=M(arguments);return c=c.then(function(n){return S(t[0])?w(t[0].call(s(),n)).then(function(n){return t[0]=n,e.apply(f,t)}):w(e.apply(f,t))})}}var u,a=[],c=w(),f=this;f.map=i(function(n){return u||m(n,"center",function(n){return u=B("Map",t.get(0),n),a.push(u),u})}),h("Marker:position Circle:center InfoWindow:position:0 Polyline:path Polygon:paths",function(t){var e=(t=t.split(":"))[1]||"";f[t[0].toLowerCase()]=i(r(function(n){return(e.match(/^path/)?function(n,t,e){return(n=b(n))[t]=(n[t]||[]).map(function(n){return T(n)}),g(e(n))}:m)(n,e,function(n){return"0"!==t[2]&&(n.map=u),B(t[0],n)})}))}),h("TrafficLayer TransitLayer BicyclingLayer",function(t){f[t.toLowerCase()]=i(function(){var n=B(t);return a.push(n),n.setMap(u),n})}),f.kmllayer=i(r(function(n){return(n=b(n)).map=u,w(B("KmlLayer",n))})),f.rectangle=i(r(function(n){return v(n,function(n){return n.map=u,B("Rectangle",n)})})),f.overlay=i(r(function(n){function t(n){return k(u,n)}return(n=b(n)).bounds?v(n,t):m(n,"position",t)})),f.groundoverlay=i(function(e,n,o){return v({bounds:n},function(n){(o=b(o)).map=u;var t=B("GroundOverlay",e,n.bounds,o);return a.push(t),t})}),f.styledmaptype=i(function(n,t,e){var o=B("StyledMapType",t,e);return a.push(o),u.mapTypes.set(n,o),o}),f.streetviewpanorama=i(function(e,n){return m(n,"position",function(n){var t=B("StreetViewPanorama",p(e).get(0),n);return u.setStreetView(t),a.push(t),t})}),f.route=i(function(n){var e=j();return(n=b(n)).origin=T(n.origin),n.destination=T(n.destination),d("DirectionsService").route(n,function(n,t){a.push(n),e.resolve(t===O.DirectionsStatus.OK&&n)}),e}),f.cluster=i(function(n){var t=new y(u,b(n));return a.push(t),g(t)}),f.directionsrenderer=i(function(n){var t;return n&&((n=b(n)).map=u,n.panel&&(n.panel=p(n.panel).get(0)),t=B("DirectionsRenderer",n)),a.push(t),t}),f.latlng=i(r(function(n){return m(n,"latlng",function(n){return a.push(n.latlng),n.latlng})})),f.fit=i(function(){var t=B("LatLngBounds");return C(a,function(n){n!==u&&C(n,function(n){n&&(n.getPosition&&n.getPosition()?t.extend(n.getPosition()):n.getBounds&&n.getBounds()?(t.extend(n.getBounds().getNorthEast()),t.extend(n.getBounds().getSouthWest())):n.getPaths&&n.getPaths()?C(n.getPaths().getArray(),function(n){C(n.getArray(),function(n){t.extend(n)})}):n.getPath&&n.getPath()?C(n.getPath().getArray(),function(n){t.extend(n)}):n.getCenter&&n.getCenter()&&t.extend(n.getCenter()))})}),t.isEmpty()||u.fitBounds(t),!0}),f.wait=function(e){c=c.then(function(n){var t=j();return setTimeout(function(){t.resolve(n)},e),t})},f.then=function(n){S(n)&&(c=c.then(function(t){return w(n.call(s(),t)).then(function(n){return l(n)?t:n})}))},h("on once",function(n,e){f[n]=function(){var t=arguments[0];t&&("string"==typeof t&&((t={})[arguments[0]]=M(arguments,1)),c.then(function(n){if(n){if(n instanceof y)return n._b(function(n){n&&n.length&&o(t,n,e)}),o(t,n.markers(),[void 0,n],e);o(t,n,e)}}))}}),f.get=function(n){return l(n)?a.map(function(n){return P(n)?n.slice():n}):(n<0&&(n=a.length+n),P(a[n])?a[n].slice():a[n])},n&&f.map(n)}var O,o,u,c,s,f,L={},w=p.when,x=p.extend,P=p.isArray,S=p.isFunction,j=p.Deferred;(s=j(),f="__gmap3",p.holdReady(!0),c=function(){var t;n.google&&n.google.maps||!1===o?s.resolve():(n[f]=function(){delete n[f],s.resolve()},(u=e.createElement("script")).type="text/javascript",u.src="https://maps.googleapis.com/maps/api/js?callback="+f+(o?"&"+("string"==typeof o?o:E(t=o).map(function(n){return encodeURIComponent(n)+"="+encodeURIComponent(t[n])}).join("&")):""),p("head").append(u))},"loading"!=e.readyState?c():e.addEventListener("DOMContentLoaded",c),s.promise()).then(function(){p.holdReady(!1)}),p.gmap3=function(n){o=n},p.fn.gmap3=function(e){var o=[];return O=n.google.maps,this.each(function(){var n=p(this),t=n.data("gmap3");t||(t=new r(n,e),n.data("gmap3",t)),o.push(t)}),new t(this,o)}}(jQuery,window,document);